<!DOCTYPE html>
<head>
<meta charset="utf-8">
<style>
body, html {
	width: 100%;
	height: 100%;
	margin: 0;
}
#beadnet {
	border: 3px solid gray;
	box-sizing: border-box;
	position: absolute;
	top: 0;
	left: 0;
	bottom: 0;
	right: 0;
}
</style>
</head>
<body>
<div id="beadnet"></div>

<script src="../node_modules/d3/dist/d3.js"></script>
<script src="../node_modules/async/dist/async.js"></script>

<script src="../dist/beadnet.standalone.min.js"></script>
<script>
window.onload = function () {

	var colors = d3.scaleOrdinal(d3.schemeCategory10);

	var myNodes = [{
		id: "Alice",
		color: colors(3),
		balance: 2
	}, {
		id: "Hub1",
		color: colors(4),
		balance: 10
	}, { 
		id: "Hub2",
		color: colors(5),
		balance: 20
	}, { 
		id: "Bob",
		color: colors(6),
		balance: 4
	}];

	var myChannels = [{
		source: "Alice", 
		target: "Hub1",
		sourceBalance: 1,
		targetBalance: 0
	}, {
		source: "Hub1", 
		target: "Hub2",
		sourceBalance: 2,
		targetBalance: 0
	}, {
		source: "Bob", 
		target: "Hub2",
		sourceBalance: 4,
		targetBalance: 0
	}, {
		source: "Hub1", 
		target: "Bob",
		sourceBalance: 3,
		targetBalance: 0
	}];

	var bn = new beadnet();
	bn.createSVG({
		colorScheme: colors
	});

	bn.addNodes(myNodes);


	myChannels.forEach((channel, i) => {
		setTimeout(() => {
			console.log("Add channel ",i);
			bn.addChannel(myChannels[i]);
		}, 2000*i);
	});

};
</script>
</body>
</html>