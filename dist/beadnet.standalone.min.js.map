{"version":3,"file":"beadnet.standalone.min.js","sources":["../node_modules/loglevel/lib/loglevel.js","../src/logger.js","../src/options.js","../src/beadnet.js"],"sourcesContent":["/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      var storageKey = \"loglevel\";\n      if (name) {\n        storageKey += \":\" + name;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if (typeof name !== \"string\" || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    return defaultLogger;\n}));\n","import log from 'loglevel';\n\nlog.enableAll();\nlog.setLevel(\"TRACE\");\n\nexport default log;","const defaultOptions = {\n\t\t\t\n\tcolorScheme: d3.scaleOrdinal(d3.schemeCategory10),\n\n\tcontainer: {\n\t\tselector: '#beadnet',\n\t\tbackgroundColor: '#FFF'\n\t},\n\n\tnodes: {\n\t\tradius: 30,\n\t\tcolor: null,\n\t\tstrokeWidth: 3,\n\t\tstrokeColor: null,\n\t},\n\n\tchannels: {\n\t\tcolor: 'lightgray',\n\t\tstrokeWidth: 3,\n\t\tstrokeColor: null,\n\t}\n};\n\n/** \n * Merge default option with user given options \n * To make a parameter required set it to \"undefined\" in the defaults. \n */\nfunction extendDefaultOptions(options) {\n\tlet opt = {};\n\tObject.assign(opt, defaultOptions, options);\n\t\n\topt.nodes.color = opt.nodes.color || opt.colorScheme(0);\n\topt.nodes.strokeColor = opt.nodes.strokeColor || opt.container.backgroundColor;\n\t\n\treturn opt;\n}\n\nexport default extendDefaultOptions;\n","//import randomID from 'random-id';\nimport log from './logger';\nimport extendDefaultOptions from './options';\n\nclass BeatNet {\n\n\t/**\n\t * TODO\n\t * @param {*} options \n\t */\n\tconstructor(options) {\n\t\tthis._opt = extendDefaultOptions(options);\n\t\tlog.debug(\"initializing beadnet with options: \", this._opt);\n\t}\n\n\t/**\n\t * TODO\n\t */\n\tcreateSVG() {\n\t\t/* find the parent container DOM element and insert an SVG */\n\t\tthis.container = document.querySelector(this._opt.container.selector);\n\t\tthis.svg = d3.select(this.container)\n\t\t\t.append(\"svg\")\n\t\t\t.attr(\"class\", \"beadnet\");\n\t\t\n\t\tthis.updateSVGSize();\n\n\t\t/* create svg root element called with class \"chart\" and initial  */\n\t\tthis.chart = this.svg.append(\"g\")\n\t\t\t.attr(\"class\", \"chart\")\n\t\t\t.attr(\"transform\", \"translate(0,0) scale(1)\");\n\n\t\t/* create a SVG-container-element for all nodes and all channels */\n\t\tthis.channelContainer = this.chart.append(\"g\").attr(\"class\", \"channels\");\n\t\tthis.nodeContainer = this.chart.append(\"g\").attr(\"class\", \"nodes\");\n\t\t\n\t\tthis.nodes = [];\n\t\tthis.channels = [];\n\n\t\tthis.simulation = this.createSimulation();\n\t\t\n\t\tthis.updateSimulationCenter();\n\n\t\tthis.behaviors = this.createBehaviors();\n\t\tthis.svg.call(this.behaviors.zoom);\n\n\t\tthis.createNodes();\n\t\t\n\t\twindow.addEventListener(\"resize\", this.onResize.bind(this));\n\t}\n\n\tcreateSimulation() {\n\t\treturn d3.forceSimulation()\n\t\t\t.alphaDecay(0.1)\n\t\t\t//.force(\"x\", d3.forceX().strength(0))\n\t\t\t//.force(\"y\", d3.forceY().strength(1))\n\t\t\t.force(\"charge\", d3.forceManyBody().strength(-2000).distanceMin(1*this.forceDistance).distanceMax(3*this.forceDistance))\n\t\t\t.force(\"collide\", d3.forceCollide(this.forceDistance/1))\n\t\t\t.force(\"link\", d3.forceLink(this.channels).distance(this.forceDistance))\n\t\t\t.force(\"center\", d3.forceCenter(this.width / 2, this.height / 2))\n\t\t\t.alphaTarget(0)\n\t\t\t.on(\"tick\", this.ticked.bind(this));\n\t}\n\n\t/**\n\t * TODO\n\t */\n\tupdateSVGSize() {\n\t\tthis.width = +this.container.clientWidth;\n\t\tthis.height = +this.container.clientHeight;\n\t\tthis.forceDistance = (this.width + this.height)*.1;\n\t\tthis.svg\n\t\t\t.attr(\"width\", this.width)\n\t\t\t.attr(\"height\", this.height);\n\t}\n\n\t/**\n\t * TODO\n\t */\n\tonResize() {\n\t\tthis.updateSVGSize();\n\t\tthis.updateSimulationCenter();\n\t\tthis.createBehaviors();\n\t}\n\t\n\t/**\n\t * \n\t */\n\tcreateBehaviors() {\n\t\treturn {\n\n\t\t\tzoom: d3.zoom()\n\t\t\t\t.scaleExtent([0.1, 5, 4])\n\t\t\t\t.on('zoom', () => this.chart.attr('transform', d3.event.transform)),\n\n\t\t\tdrag: d3.drag()\n\t\t\t\t.on(\"start\", this.onDragStart.bind(this))\n\t\t\t\t.on(\"drag\", this.onDragged.bind(this))\n\t\t\t\t.on(\"end\", this.onDragendEnd.bind(this))\n\t\t}\n\t}\n\n\tupdateSimulationCenter() {\n\t\tconst centerX = this.svg.attr('width') / 2;\n\t\tconst centerY = this.svg.attr('height') / 2;\n\t\tthis.simulation\n\t\t\t.force(\"center\", d3.forceCenter(centerX, centerY))\n\t\t\t.restart();\n\t}\n\n\t/**\n\t * TODO\n\t * @param {*} id \n\t * @param {*} x \n\t * @param {*} x \n\t */\n\tcreateNodes() {\n\t\tthis.nodeElements = this.nodeContainer.selectAll(\".node\")\n\t\t\t.data(this.nodes)\n\t\t\t.enter()\n\t\t\t.append(\"g\")\n\t\t\t\t.attr(\"id\", (d) => {\tconsole.log(d); return d.id; })\n\t\t\t\t.attr(\"class\", \"node\")\n\t\t\t\t.attr(\"balance\", (d) => d.balance)\n\t\t\t\t.style(\"stroke\", this._opt.nodes.strokeColor)\n\t\t\t\t.style(\"stroke-width\", this._opt.nodes.strokeWidth);\n\t\n\t\tvar circle = this.nodeElements.append(\"circle\")\n\t\t\t.attr(\"class\", \"node\")\n\t\t\t.attr(\"r\",  this._opt.nodes.radius)\n\t\t\t//.attr(\"cx\", this.width/2)\n\t\t\t//.attr(\"cy\", this.height/2)\n\t\t\t.attr(\"fill\", function(d) { return d.color; })\n\t\t\t.style(\"cursor\", \"pointer\"); \n\t\t\n\t\tvar labels = this.nodeElements.append(\"text\")\n\t\t\t.style(\"stroke-width\", 0.5)\n\t\t\t.attr(\"stroke\", this._opt.nodes.strokeColor)\n\t\t\t.attr(\"fill\", this._opt.nodes.strokeColor)\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"15px\")\n\t\t\t.attr(\"y\", \"5px\")\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.attr(\"pointer-events\", \"none\")\n\t\t\t.text((d) => d.balance || d.id);\n\n\t\tthis.nodeElements.append(\"title\")\n\t\t\t.text(function(d) { return d.id; });\n\t\t\n\t\tthis.nodeElements.call(this.behaviors.drag);\n\n\t\treturn this.nodeElements;\n\t}\n\n\taddNode(node) {\n\t\t\n\t\tnode.channelCount = 0;\n\t\tnode.color = node.color || this._opt.colorScheme(this.nodes.length % 10);\n\n\t\tthis.nodes.push(node);\n\t\tthis.createNodes();\t\n\n\t\tthis.simulation\n\t\t\t.nodes(this.nodes)\n\t\t\t//.force(\"collide\", d3.forceCollide(this.forceDistance/2))\n\t\t\t.restart();\n\t}\n\n\taddNodes(nodes) {\n\t\tnodes = nodes.map((node, i) => {\n\t\t\tnode.channelCount = 0;\n\t\t\tnode.color = node.color || this._opt.colorScheme(i % 10);\n\t\t\treturn node;\n\t\t})\n\n\t\tthis.nodes.push(...nodes);\n\t\t\n\t\tthis.createNodes();\t\n\t\t\n\t\tthis.simulation\n\t\t\t.nodes(this.nodes)\n\t\t\t//.force(\"collide\", d3.forceCollide(this.forceDistance/2))\n\t\t\t.restart();\n\t}\n\n\tupdateChannels() {\n\t\tthis.channelElements = this.channelContainer.selectAll(\".channel\").data(this.channels);\n\t\t\n\t\tthis.channelElements.enter()\n\t\t\t.append(\"g\")\n\t\t\t\t.attr(\"class\", \"channel\")\n\t\t\t\t.attr(\"source-balance\", (d) => d.sourceBalance)\n\t\t\t\t.attr(\"target-balance\", (d) => d.targetBalance)\n\t\t\t\t.attr(\"source-id\", (d) => d.source.id)\n\t\t\t\t.attr(\"target-id\", (d) => d.target.id)\n\t\t\t.append(\"path\")\n\t\t\t\t.style(\"stroke-width\", this._opt.channels.strokeWidth)\n\t\t\t\t.style(\"stroke\", this._opt.channels.color)\n\t\t\t\t.style(\"fill\", \"none\");\n\t\t\n\t\tthis.paths = this.channelContainer.selectAll(\".channel path\")\n\n\t\tthis.channelElements.exit().remove()\n\t}\n\n\taddChannel(channel) {\n\t\tvar nodeById = d3.map(this.nodes, function(d) { return d.id; });\n\t\tvar source = nodeById.get(channel.source);\n\t\tvar target = nodeById.get(channel.target);\n\t\tthis.channels.push({\n\t\t\tsource: source, \n\t\t\ttarget: target,\n\t\t\tsourceBalance: channel.sourceBalance,\n\t\t\ttargetBalance: channel.targetBalance\n\t\t});\n\n\t\tsource.channelCount = source.channelCount + 1;\n\t\ttarget.channelCount = target.channelCount + 1;\n\t\tconsole.log(\"addChannel: \", source);\n\t\t\n\t\tthis.updateChannels();\n\n\t\tthis.simulation.force(\"link\").links(this.channels)\n\t\t\n\t\tthis.simulation.alpha(1).restart();\n\n\t//\tthis.simulation.restart();\n\t}\n\n\taddChannels(channels) {\n\t\tchannels.forEach((channel) => this.addChannel(channel));\n\t}\n\n\tgetRandomNode() {\n\t\treturn this.nodes[Math.floor(Math.random() * this.nodes.length)];\n\t}\n\n\tticked() {\n\t\tif (this.nodeElements) {\n\t\t\tthis.nodeElements.attr(\"transform\", (d) => `translate(${d.x},${d.y})`);\n\t\t}\n\t\tif (this.paths) {\n\t\t\tthis.paths.attr(\"d\", (d) => `M${d.source.x},${d.source.y} ${d.target.x},${d.target.y}`);\n\n\t\t\t// this.paths.attr(\"d\", (d) => {\n\t\t\t// \tvar dx = d.target.x - d.source.x;\n\t\t\t// \tvar dy = d.target.y - d.source.y;\n\t\t\t// \tvar dr = Math.sqrt((dx*dx+d.source.channelCount) + (dy*dy+d.target.channelCount));\n\t\t\t// \treturn `M${d.source.x},${d.source.y}A${dr},${dr} 0 0,1 ${d.target.x},${d.target.y}`;\n\t\t\t// });\n\t\t}\n\t\t//tickedBeads();\n\t}\n\n\tonDragStart(d) {\n\t\tif (!d3.event.active) {\n\t\t\tthis.simulation\n\t\t\t\t.alphaTarget(0.1)\n\t\t\t\t.restart();\n\t\t}\n\t\td.fx = d.x;\n\t\td.fy = d.y;\n\t}\n\t\n\tonDragged(d) {\n\t\td.fx = d3.event.x; \n\t\td.fy = d3.event.y;\n\t}\n\t\n\tonDragendEnd(d) {\n\t\tif (!d3.event.active) { \n\t\t\tthis.simulation\n\t\t\t\t.alphaTarget(0);\n\t\t}\n\t\td.fx = null;\n\t\td.fy = null;\n\t}\n}\n\nexport default BeatNet;"],"names":["root","definition","this","noop","undefinedType","logMethods","bindMethod","obj","methodName","method","bind","Function","prototype","call","e","apply","arguments","replaceLoggingMethods","level","loggerName","i","length","methodFactory","log","debug","defaultMethodFactory","console","undefined","Logger","name","defaultLevel","factory","currentLevel","self","storageKey","getPersistedLevel","storedLevel","window","localStorage","ignore","cookie","document","location","indexOf","encodeURIComponent","exec","slice","levels","TRACE","DEBUG","INFO","WARN","ERROR","SILENT","getLevel","setLevel","persist","toUpperCase","levelNum","levelName","persistLevelIfPossible","setDefaultLevel","enableAll","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","TypeError","logger","_log","noConflict","getLoggers","module","exports","defaultOptions","d3","scaleOrdinal","schemeCategory10","options","opt","_opt","assign","nodes","color","colorScheme","strokeColor","container","backgroundColor","querySelector","selector","svg","select","append","attr","updateSVGSize","chart","channelContainer","nodeContainer","channels","simulation","createSimulation","updateSimulationCenter","behaviors","createBehaviors","zoom","createNodes","addEventListener","onResize","forceSimulation","alphaDecay","force","forceManyBody","strength","distanceMin","forceDistance","distanceMax","forceCollide","forceLink","distance","forceCenter","width","height","alphaTarget","on","ticked","clientWidth","clientHeight","scaleExtent","_this","event","transform","drag","onDragStart","onDragged","onDragendEnd","centerX","centerY","restart","nodeElements","selectAll","data","enter","d","id","balance","style","strokeWidth","radius","text","node","channelCount","push","map","_this2","channelElements","sourceBalance","targetBalance","source","target","paths","exit","remove","channel","nodeById","get","updateChannels","links","alpha","forEach","_this3","addChannel","Math","floor","random","x","y","active","fx","fy"],"mappings":"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"}